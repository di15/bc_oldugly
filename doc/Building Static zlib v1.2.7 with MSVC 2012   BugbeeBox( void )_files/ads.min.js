var viewablemedia=viewablemedia||{};
viewablemedia.Controller=function(){this.ssl=!1;var a={};return{insertAdResults:function(b,c,e){a[b]={ad_json:c,controller:null,adtag:e}},controllerById:function(b){return a[b]?a[b].controller:null},adTagById:function(b){return a[b]?a[b].adtag:null},proxy:function(a,c){return function(){a.apply(c,arguments)}},registerController:function(b,c){if(a[b])a[b].controller=c,c.displayAd(a[b].ad_json);else throw Error("viewablemedia.Controller.registerController: failed to find placement "+b);},log:function(a){try{console.log(a)}catch(c){}},
adjustForSSL:function(a){return this.ssl?a.replace(/^http:/i,"https:"):a}}}();
viewablemedia.AdTag=viewablemedia.AdTag||function(){this.isThirdPartyPixel=function(a){return-1==a.search(RegExp("https?://"+this.ad_info.ch+"/p/2/"))};this.onAdsReturned=function(a){var b;if(0==a.results&&"function"==typeof this.noAdsTemplateFunction)try{this.noAdsTemplateFunction(a)}catch(c){this.showError(c.message)}else if(!a.results||0==a.results)a=a.error,b=this.errorText,a&&(b+="<br/>"+a.statusText,a.status&&(b+=" ("+a.status+")")),this.showError(b);else{this.ad_info=a;a.id=this.id;viewablemedia.Controller.insertAdResults(a.id,
a,this);for(b=0;b<a.videos.length;b++)if(a.videos[b].pixels.impression)this.firePixels(a.videos[b].pixels.impression),a.videos[b].pixels.impression=[];try{this.applyTemplate(a),this.as=null}catch(e){this.showError(e.message)}}};this.applyTemplate=function(a){var b,c;b=this.getTemplateHTML(a);if(null==this.templateFunction)if(c=document.getElementById(this.div_id))c.style.width=a.width+"px",c.style.height=a.height+"px",c.innerHTML=b;else throw Error(this.errorText);};this.getTemplateHTML=function(a){var b,
c;try{c=null==this.templateFunction?this.evalGlobal(a.template):this.templateFunction,b=c(a),window.execScript?window.execScript(a.controller):eval(a.controller)}catch(e){b=this.errorText;if("staging"==a.env||"development"==a.env)b+="<br/>applyTemplate: "+e.message,void 0!=e.number&&0!=e.number&&(b+=" ("+e.number+")");throw Error(b);}return b};this.showError=function(a){var b=document.getElementById(this.div_id);try{b.style.backgroundColor="#333333",b.style.color="#ffffff",b.style.textAlign="center",
b.style.verticalAlign="middle",b.style.display="table-cell"}catch(c){}b.innerHTML=a};this.evalGlobal=function(a){return window.execScript?(window.execScript("_viewable_code_evaled = ("+a+")",""),_viewable_code_evaled):eval(a)};this.firePixels=function(a){if(a&&0<a.length){var b;for(b=0;b<a.length;b++)this.insertFirePixel(a[b])}};this.insertFirePixel=function(a){if(!(null==a||0==a.length)){var b,c;try{b=document.createElement("img"),b.src=a,c=document.getElementById("adNetPixels_"+this.id),null!=c&&
c.appendChild(b)}catch(e){viewablemedia.Controller.log("insertFirePixel: "+e.toString())}return b}};this.firePixelsCallback=function(a,b){var c;for(c=0;c<a.length;c++)if(c==a.length-1)var e=this.insertFirePixel(a[c]),h=setInterval(function(){null!=e.complete&&e.complete&&(clearInterval(h),b())},100);else this.insertFirePixel(a[c])};this.embedFlow=function(a,b){var c,e;c=null==b.onComplete?null:b.onComplete;e=viewablemedia.Controller.proxy(function(){if(b.onView)b.onView()},this);var h=this.encodePixels(a,
this.ad_info),f=escape(this.encodeAdContext(a,this.ad_info));c={clip:{pageUrl:a.enable_sharing&&0<a.share_link_url.length?encodeURIComponent(a.share_link_url):null,url:viewablemedia.Controller.adjustForSSL(a.video_id_or_url),autoPlay:a.enable_auto_play,autoBuffering:!1,onStart:e,onFinish:c},play:{url:viewablemedia.Controller.adjustForSSL("http://cdn.visiblemeasures.com/ad_units/in_banner_video/flowplayer-3.2.7/playButton.swf")},plugins:{vmcapi:{url:viewablemedia.Controller.adjustForSSL(this.getSwfUrl("flow")),
vmcKey:this.ad_info.account_key,vmcStage:"staging"==this.ad_info.env||"development"==this.ad_info.env?1:0,hostPage:this.ad_info.hostpage,hostReferrer:this.ad_info.referrer,vppixel:h.vp,mppixel:h.mp,cppixel:h.cp,twentyfivepixel:h.fqp,seventyfivepixel:h.tqp,vmcPixel:!0,adcontext:f},controls:{url:viewablemedia.Controller.adjustForSSL("http://cdn.visiblemeasures.com/ad_units/in_banner_video/flowplayer-3.2.7/flowplayer.controls-3.2.5.swf"),volume:!1,fullscreen:!1}}};if(a.enable_sharing)e={url:viewablemedia.Controller.adjustForSSL("http://cdn.visiblemeasures.com/ad_units/in_banner_video/flowplayer-3.2.7/flowplayer.sharing-3.2.1.swf")},
e.email=0==a.share_link_url.length?e.facebook=e.twitter=null:e.facebook=e.twitter=a.share_text,c.plugins.sharing=e;e=document.getElementById(b.player_id);e.style.width=b.width+"px";e.style.height=b.height+"px";e.innerHTML="";e={src:viewablemedia.Controller.adjustForSSL("http://cdn.visiblemeasures.com/ad_units/in_banner_video/flowplayer-3.2.7/flowplayer.unlimited-3.2.7.swf"),width:b.width,opts:a.height};if(this.wmode)e.wmode=this.wmode;this.player=flowplayer(b.player_id,e,c);b.onStateChange&&(this.player.onStart(function(){b.onStateChange("ON_STATE_CHANGE",
1)}),this.player.onPause(function(){b.onStateChange("ON_STATE_CHANGE",2)}),this.player.onResume(function(){b.onStateChange("ON_STATE_CHANGE",1)}),this.player.onFinish(function(){b.onStateChange("ON_STATE_CHANGE",0)}))};this.embedYT=function(a,b){try{var c,e,h,f;c=b.player_id;this.current_ad=a;e=new viewablemedia.YoutubePlayer(c,this.getSwfUrl("yt"));if(b.onComplete)e.on("ON_COMPLETE",b.onComplete);if(b.onView)e.on("ON_START",b.onView);if(b.onStateChange)e.on("ON_STATE_CHANGE",b.onStateChange);document.getElementById(c).innerHTML=
"";var l=this.encodePixels(a,this.ad_info),p=escape(this.encodeAdContext(a,this.ad_info)),s=escape(a.share_link_url?a.share_link_url:"http://www.youtube.com/watch?v="+a.video_id_or_url);h={autohide:1,autoplay:a.enable_auto_play?1:0,fs:1,loop:1,playerapiid:c,vmcKey:this.ad_info.account_key,video:a.video_id_or_url,chromeless:"1",link:s,twtext:escape(a.share_text),vmcPixel:1,vppixel:l.vp,mppixel:l.mp,cppixel:l.cp,twentyfivepixel:l.fqp,seventyfivepixel:l.tqp,vmcStage:"staging"==this.ad_info.env||"development"==
this.ad_info.env?1:0,host:this.ad_info.hostpage,referrer:this.ad_info.referrer,adcontext:p};f={allowscriptaccess:"always",allowfullscreen:"true"};if(this.wmode)f.wmode=this.wmode;viewablemedia.swfobject.embedSWF(viewablemedia.Controller.adjustForSSL(this.getSwfUrl("yt")),c,b.width,b.height,"9.0.0",viewablemedia.Controller.adjustForSSL("http://cdn.visiblemeasures.com/ad_units/in_banner_video/expressInstall.swf"),h,f,{})}catch(t){viewablemedia.Controller.log(t)}};this.embedYTMobile=function(a,b){try{var c=
this.encodeAdContext(a,this.ad_info),e=a.pixels?this.filterThirdPartyPixels(a.pixels):{},h={width:b.width,height:b.height,autoplay:a.enable_auto_play?1:0,pixel:!0,adTagPixels:e,stage:"staging"==this.ad_info.env||"development"==this.ad_info.env?!0:!1,host:decodeURIComponent(this.ad_info.hostpage),referrer:decodeURIComponent(this.ad_info.referrer),adcontext:c};if(b.onView)h.onView=function(){b.onView()};if(b.onComplete)h.onComplete=function(){b.onComplete()};if(b.onStateChange)h.onStateChange=function(a){b.onStateChange(a)};
new visiblemeasures.YouTubePlayerWrapper(b.player_id,a.video_id_or_url,this.ad_info.account_key,h)}catch(f){viewablemedia.Controller.log(f)}};this.filterThirdPartyPixels=function(a){var b={},c;for(c in a){b[c]=[];for(var e=0;e<a[c].length;e++){var h=a[c][e];this.isThirdPartyPixel(h)&&b[c].push(h)}}return b};this.PLAYER_SWF_PATHS={staging:"http://cdn.visiblemeasures.com/staging/swf/as3/current/bin",production:"http://cdn.visiblemeasures.com/swf/as3/current/bin"};this.getSwfUrl=function(a){return viewablemedia.Controller.adjustForSSL(this.PLAYER_SWF_PATHS["staging"==
this.ad_info.env||"development"==this.ad_info.env?"staging":"production"]+{flow:"/FlowPlayerPlugin.swf",yt:"/YouTubeEmbeddedPlayer.swf"}[a])};this.errorText="Video not currently available.";this.ad_info={videos:[]}};
viewablemedia.AdTag.prototype.createAd=function(a){var b,c;null==a&&(a={});this.placement=a.pl||"";this.id=(new Date).getTime();this.templateFunction=a.templateFunction;this.noAdsTemplateFunction=a.noAdsTemplateFunction;this.mobile=1==a.mobile?!0:!1;if(a.wmode)this.wmode=a.wmode;if(a.div)this.div_id=a.div;else if(null==this.templateFunction)this.div_id="_vmc_adtag_"+(new Date).getTime(),document.write('<div id="'+this.div_id+'" style="position: relative; width: 300px; height: 250px"></div>');c=document.createElement("div");
c.setAttribute("id","adNetPixels_"+this.id);c.setAttribute("style","display:none");document.getElementsByTagName("body")[0].appendChild(c);for(b in a);if(null==a.onComplete)a.onComplete=viewablemedia.Controller.proxy(this.onAdsReturned,this);this.onStateChange=a.onStateChange;viewablemedia.Controller.ssl=a.ssl?!0:!1;this.as=new viewablemedia.AdSelector;this.as.selectAds(a)};
viewablemedia.AdTag.prototype.fireEvent=function(a){var b,c,e;"string"==typeof a?(c=0,b=a):(c=a.index||0,b=a.event);if("click"!=b&&"view"!=b)throw Error("viewablemedia.AdTag.firePixel: Unknown event type: "+b);if(null==this.ad_info||c>=this.ad_info.videos.length)throw Error("viewablemedia.AdTag.playAd: Ad not found.");switch(b){case "click":e=this.ad_info.videos[c].pixels.click;break;case "view":e=this.ad_info.videos[c].pixels.view}e&&(a.onComplete?this.firePixelsCallback(e,a.onComplete):this.firePixels(e))};
viewablemedia.AdTag.prototype.encodeAdContext=function(a,b){var c="p="+a.placement+"&l="+a.line_item+"&c="+a.creative+"&d="+b.decision_id;a.optimizer_id&&(c+="&o="+a.optimizer_id);b.traffic_driver&&(c+="&td="+b.traffic_driver);b.cust00&&(c+="&cust00="+encodeURIComponent(b.cust00));b.cust01&&(c+="&cust01="+encodeURIComponent(b.cust01));b.cust02&&(c+="&cust02="+encodeURIComponent(b.cust02));b.cust03&&(c+="&cust03="+encodeURIComponent(b.cust03));b.cust04&&(c+="&cust04="+encodeURIComponent(b.cust04));
b.cust05&&(c+="&cust05="+encodeURIComponent(b.cust05));b.cust06&&(c+="&cust06="+encodeURIComponent(b.cust06));b.cust07&&(c+="&cust07="+encodeURIComponent(b.cust07));b.cust08&&(c+="&cust08="+encodeURIComponent(b.cust08));b.cust09&&(c+="&cust09="+encodeURIComponent(b.cust09));return c};
viewablemedia.AdTag.prototype.encodePixels=function(a){if(a&&a.pixels){var b="";if(a.pixels.view)for(i=0;i<a.pixels.view.length;i++){var c=a.pixels.view[i];this.isThirdPartyPixel(c)&&(0<b.length&&(b+="%%SEP%%"),b+=c)}var e="";if(a.pixels.midpoint)for(i=0;i<a.pixels.midpoint.length;i++)c=a.pixels.midpoint[i],this.isThirdPartyPixel(c)&&(0<e.length&&(e+="%%SEP%%"),e+=c);var h="";if(a.pixels.complete)for(i=0;i<a.pixels.complete.length;i++)c=a.pixels.complete[i],this.isThirdPartyPixel(c)&&(0<h.length&&
(h+="%%SEP%%"),h+=c);var f="";if(a.pixels.firstQuartile)for(i=0;i<a.pixels.firstQuartile.length;i++)c=a.pixels.firstQuartile[i],this.isThirdPartyPixel(c)&&(0<f.length&&(f+="%%SEP%%"),f+=c);var l="";if(a.pixels.thirdQuartile)for(i=0;i<a.pixels.thirdQuartile.length;i++)c=a.pixels.thirdQuartile[i],this.isThirdPartyPixel(c)&&(0<l.length&&(l+="%%SEP%%"),l+=c);return{vp:escape(b),mp:escape(e),cp:escape(h),fqp:escape(f),tqp:escape(l)}}return{vp:"",mp:"",cp:"",fqp:"",tqp:""}};
viewablemedia.AdTag.prototype.playAd=function(a){var b,c;"string"==typeof a?(b=a,c=0):(b=a.player,c=a.index||0);if(null==b)throw Error("viewablemedia.AdTag.playAd: An element ID for the player is required.");if(null==this.ad_info||c>=this.ad_info.videos.length)throw Error("viewablemedia.AdTag.playAd: Ad not found.");this.current_ad=c=this.ad_info.videos[c];a={player_id:b,width:a.width||this.ad_info.width,height:a.height||this.ad_info.height,onComplete:a.onComplete,onView:a.onView,onStateChange:this.onStateChange,
account_key:this.ad_info.account_key};11==c.video_id_or_url.length?this.mobile?this.embedYTMobile(c,a):this.embedYT(c,a):this.embedFlow(c,a)};viewablemedia.AdTag.prototype.version=function(){return"2.1.1"};
viewablemedia.AdSelector=function(){this.truncateQS=function(a){var b,a=unescape(a);b=a.indexOf("?");-1<b&&(a=a.substr(0,b));return a};this.jsonp=function(a,b){try{var c,e,h,f;c="jsonp_"+(new Date).getTime();if(this.opts&&this.opts.url)a=this.opts.url,c="jsonp_test";e=document;h=e.body;f=e.createElement("script");viewablemedia[c]=function(){h.removeChild(f);b.apply(b,arguments);b=e=h=f=null};f.src=a.replace("{callback}","viewablemedia."+c);h.appendChild(f)}catch(l){viewablemedia.Controller.log(l)}};
this.selectAds=function(a){var b,c,e,h,f,l;h=a.view||"";try{a.view=h,c=a.u||document.location,e=a.r||document.referrer,a.u=encodeURIComponent(this.truncateQS(c)),a.r=encodeURIComponent(this.truncateQS(e))}catch(p){}this.opts=a;b=this.opts.host?this.opts.host:"staging"==this.opts.env?"http://ad-stage.visiblemeasures.com/":"development"==this.opts.env?"http://localhost:8001/":"http://ad.visiblemeasures.com/";b=viewablemedia.Controller.adjustForSSL(b);c=b+"a/2/?pl="+a.pl+"&callback={callback}&rnd="+
(new Date).getTime()+"&u="+a.u+"&r="+a.r;a.ssl&&(c+="&ssl=true");a.n&&(c+="&n="+a.n);a.max_primary_creatives&&(c+="&max_primary_creatives="+a.max_primary_creatives);a.decId&&(c+="&decId="+a.decId);a.hint&&(c+="&h="+encodeURIComponent(a.hint));a.trialpay&&(c+="&trialpay="+encodeURIComponent(a.trialpay));a.cust00&&(c+="&cust00="+encodeURIComponent(a.cust00));a.cust01&&(c+="&cust01="+encodeURIComponent(a.cust01));a.cust02&&(c+="&cust02="+encodeURIComponent(a.cust02));a.cust03&&(c+="&cust03="+encodeURIComponent(a.cust03));
a.cust04&&(c+="&cust04="+encodeURIComponent(a.cust04));a.cust05&&(c+="&cust05="+encodeURIComponent(a.cust05));a.cust06&&(c+="&cust06="+encodeURIComponent(a.cust06));a.cust07&&(c+="&cust07="+encodeURIComponent(a.cust07));a.cust08&&(c+="&cust08="+encodeURIComponent(a.cust08));a.cust09&&(c+="&cust09="+encodeURIComponent(a.cust09));l=this;this.jsonp(c,function(c){var e,d;try{e=c;e.env=a.env||"production";e.hostpage=a.u;e.referrer=a.r;e.adServer=b;if(a.player)e.player=a.player;e.adStyle=a.adStyle||{};
e.opts=a;viewablemedia.Controller.adjustForSSL(e.collector);for(f=0;f<e.videos.length;f++)if(d=e.videos[f],d.min_age=parseInt(d.min_age,10),null==d.creative_size_id)d.height=e.height,d.width=e.width;if(a.view){if(!a.view instanceof Array)a.view=[a.view];for(f=0;f<e.videos.length;f++)e.videos[f].pixels.view=e.videos[f].pixels.view.concat(a.view)}}catch(k){e={error:{status:k.number,statusText:k.message}}}l.ad_json=e;a.onComplete(e)})};this.opts={};this.ad_json={}};(function(a){function b(a,e,h){this.id=a;this.PLAYER_SWF=e;this.handlers={};this.readyCallback=h;b.register(this)}b.prototype.embed=function(a){try{document.getElementById(this.id).innerHTML="";var b={autohide:1,autoplay:a.enable_auto_play?1:0,fs:1,loop:1,playerapiid:this.id,vmcKey:a.account_key,video:a.video_id_or_url,chromeless:"1",link:escape("http://www.youtube.com/watch?v="+a.video),twtext:escape(a.share_text),tppixel:escape(a.pixels.view),host:a.u,referrer:a.r};swfobject.embedSWF(this.PLAYER_SWF,
this.id,a.width,a.height,"9.0.0","http://cdn.visiblemeasures.com/ad_units/in_banner_video/expressInstall.swf",b,{allowscriptaccess:"always",allowfullscreen:"true"},{})}catch(h){alert(h)}};b.prototype.on=function(a,b){this.handlers[a]=this.handlers[a]||[];this.handlers[a].push(b)};b.prototype.onReady=function(){var a=document.getElementById(this.id),b='viewablemedia.YoutubePlayer.dispatchEvent("{id}")'.replace("{id}",this.id);a.addEventListener("onStateChange",b);this.onCustomEvent("ON_SHARE_FB");
this.onCustomEvent("ON_SHARE_TW");this.onCustomEvent("ON_SHARE_LINK");this.onCustomEvent("ON_SHARE_EMBED");this.onCustomEvent("ON_COMPLETE");this.onCustomEvent("ON_START");this.readyCallback&&this.readyCallback.call(this)};b.prototype.onCustomEvent=function(a){var e=document.getElementById(this.id);null==b.STATES[a]&&(b.STATES[a]=a);var h='viewablemedia.YoutubePlayer.dispatchCustomEvent("{id}", "{evt}")'.replace("{id}",this.id),h=h.replace("{evt}",a);e.addEventListener(a,h)};b.prototype.notifyEvent=
function(a){var e=b.STATES,h;for(h in e)e[h]==a&&(this.fireEvent(h),-1<a&&6>a&&this.fireEvent("ON_STATE_CHANGE",a))};b.prototype.fireEvent=function(a,b){var h=this.handlers[a];if(h)for(var f=0;f<h.length;f++)h[f](a,b)};b.instances=[];b.register=function(a){this.instances.push(a)};b.findById=function(a){var b=null;if(null==a||0==a.length)return this.instances[0];for(var h=0;h<this.instances.length;h++)this.instances[h].id==a&&(b=this.instances[h]);null==b&&viewablemedia.Controller.log("viewablemedia.YoutubePlayer.Failed to find player with id="+
a);return b};b.dispatchEvent=function(a){var e=b.findById(a);return function(a){e.notifyEvent(a)}};b.dispatchCustomEvent=function(a,e){var h=b.findById(a);return function(){h.notifyEvent(e)}};b.STATES={unstarted:-1,ended:0,playing:1,paused:2,buffering:3,cued:5};viewablemedia.YoutubePlayer=b;a.onYouTubePlayerReady=function(a){viewablemedia.YoutubePlayer.findById(a).onReady()}})(window);viewablemedia.swfobject=function(){function a(){if(!F){try{var a=o.getElementsByTagName("body")[0].appendChild(o.createElement("span"));a.parentNode.removeChild(a)}catch(d){return}F=!0;for(var a=G.length,b=0;b<a;b++)G[b]()}}function b(a){F?a():G[G.length]=a}function c(a){if(typeof y.addEventListener!=q)y.addEventListener("load",a,!1);else if(typeof o.addEventListener!=q)o.addEventListener("load",a,!1);else if(typeof y.attachEvent!=q)j(y,"onload",a);else if("function"==typeof y.onload){var d=y.onload;
y.onload=function(){d();a()}}else y.onload=a}function e(){var a=o.getElementsByTagName("body")[0],d=o.createElement(w);d.setAttribute("type",u);var b=a.appendChild(d);if(b){var m=0;(function(){if(typeof b.GetVariable!=q){var c=b.GetVariable("$version");if(c)c=c.split(" ")[1].split(","),n.pv=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]}else if(10>m){m++;setTimeout(arguments.callee,10);return}a.removeChild(d);b=null;h()})()}else h()}function h(){var a=z.length;if(0<a)for(var d=0;d<a;d++){var b=
z[d].id,c=z[d].callbackFn,k={success:!1,id:b};if(0<n.pv[0]){var j=m(b);if(j)if(v(z[d].swfVersion)&&!(n.wk&&312>n.wk)){if(r(b,!0),c)k.success=!0,k.ref=f(b),c(k)}else if(z[d].expressInstall&&l()){k={};k.data=z[d].expressInstall;k.width=j.getAttribute("width")||"0";k.height=j.getAttribute("height")||"0";if(j.getAttribute("class"))k.styleclass=j.getAttribute("class");if(j.getAttribute("align"))k.align=j.getAttribute("align");for(var e={},j=j.getElementsByTagName("param"),g=j.length,h=0;h<g;h++)"movie"!=
j[h].getAttribute("name").toLowerCase()&&(e[j[h].getAttribute("name")]=j[h].getAttribute("value"));p(k,e,b,c)}else s(j),c&&c(k)}else if(r(b,!0),c){if((b=f(b))&&typeof b.SetVariable!=q)k.success=!0,k.ref=b;c(k)}}}function f(a){var d=null;if((a=m(a))&&"OBJECT"==a.nodeName)typeof a.SetVariable!=q?d=a:(a=a.getElementsByTagName(w)[0])&&(d=a);return d}function l(){return!K&&v("6.0.65")&&(n.win||n.mac)&&!(n.wk&&312>n.wk)}function p(a,b,c,k){K=!0;x=k||null;N={success:!1,id:c};var j=m(c);if(j){"OBJECT"==j.nodeName?
(A=t(j),L=null):(A=j,L=c);a.id=B;if(typeof a.width==q||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height==q||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";o.title=o.title.slice(0,47)+" - Flash Player Installation";k=n.ie&&n.win?"ActiveX":"PlugIn";k="MMredirectURL="+y.location.toString().replace(/&/g,"%26")+"&MMplayerType="+k+"&MMdoctitle="+o.title;b.flashvars=typeof b.flashvars!=q?b.flashvars+("&"+k):k;if(n.ie&&n.win&&4!=j.readyState)k=o.createElement("div"),
c+="SWFObjectNew",k.setAttribute("id",c),j.parentNode.insertBefore(k,j),j.style.display="none",function(){4==j.readyState?j.parentNode.removeChild(j):setTimeout(arguments.callee,10)}();d(a,b,c)}}function s(a){if(n.ie&&n.win&&4!=a.readyState){var d=o.createElement("div");a.parentNode.insertBefore(d,a);d.parentNode.replaceChild(t(a),d);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(t(a),a)}function t(a){var d=
o.createElement("div");if(n.win&&n.ie)d.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(w)[0])if(a=a.childNodes)for(var b=a.length,c=0;c<b;c++)!(1==a[c].nodeType&&"PARAM"==a[c].nodeName)&&8!=a[c].nodeType&&d.appendChild(a[c].cloneNode(!0));return d}function d(a,d,b){var c,k=m(b);if(n.wk&&312>n.wk)return c;if(k){if(typeof a.id==q)a.id=b;if(n.ie&&n.win){var j="",e;for(e in a)if(a[e]!=Object.prototype[e])"data"==e.toLowerCase()?d.movie=a[e]:"styleclass"==e.toLowerCase()?j+=' class="'+a[e]+'"':
"classid"!=e.toLowerCase()&&(j+=" "+e+'="'+a[e]+'"');e="";for(var g in d)d[g]!=Object.prototype[g]&&(e+='<param name="'+g+'" value="'+d[g]+'" />');k.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+j+">"+e+"</object>";H[H.length]=a.id;c=m(a.id)}else{g=o.createElement(w);g.setAttribute("type",u);for(var v in a)a[v]!=Object.prototype[v]&&("styleclass"==v.toLowerCase()?g.setAttribute("class",a[v]):"classid"!=v.toLowerCase()&&g.setAttribute(v,a[v]));for(j in d)d[j]!=Object.prototype[j]&&
"movie"!=j.toLowerCase()&&(a=g,e=j,v=d[j],b=o.createElement("param"),b.setAttribute("name",e),b.setAttribute("value",v),a.appendChild(b));k.parentNode.replaceChild(g,k);c=g}}return c}function k(a){var d=m(a);if(d&&"OBJECT"==d.nodeName)n.ie&&n.win?(d.style.display="none",function(){if(4==d.readyState){var b=m(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}else setTimeout(arguments.callee,10)}()):d.parentNode.removeChild(d)}function m(a){var d=null;try{d=o.getElementById(a)}catch(b){}return d}
function j(a,d,b){a.attachEvent(d,b);C[C.length]=[a,d,b]}function v(a){var d=n.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return d[0]>a[0]||d[0]==a[0]&&d[1]>a[1]||d[0]==a[0]&&d[1]==a[1]&&d[2]>=a[2]?!0:!1}function g(a,d,b,c){if(!n.ie||!n.mac){var m=o.getElementsByTagName("head")[0];if(m){b=b&&"string"==typeof b?b:"screen";c&&(M=D=null);if(!D||M!=b)c=o.createElement("style"),c.setAttribute("type","text/css"),c.setAttribute("media",b),D=m.appendChild(c),
n.ie&&n.win&&typeof o.styleSheets!=q&&0<o.styleSheets.length&&(D=o.styleSheets[o.styleSheets.length-1]),M=b;n.ie&&n.win?D&&typeof D.addRule==w&&D.addRule(a,d):D&&typeof o.createTextNode!=q&&D.appendChild(o.createTextNode(a+" {"+d+"}"))}}}function r(a,d){if(O){var b=d?"visible":"hidden";F&&m(a)?m(a).style.visibility=b:g("#"+a,"visibility:"+b)}}function I(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=q?encodeURIComponent(a):a}var q="undefined",w="object",u="application/x-shockwave-flash",
B="SWFObjectExprInst",y=window,o=document,E=navigator,J=!1,G=[function(){J?e():h()}],z=[],H=[],C=[],A,L,x,N,F=!1,K=!1,D,M,O=!0,n=function(){var a=typeof o.getElementById!=q&&typeof o.getElementsByTagName!=q&&typeof o.createElement!=q,d=E.userAgent.toLowerCase(),b=E.platform.toLowerCase(),c=b?/win/.test(b):/win/.test(d),b=b?/mac/.test(b):/mac/.test(d),d=/webkit/.test(d)?parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,m=!+"\u000b1",k=[0,0,0],j=null;if(typeof E.plugins!=q&&typeof E.plugins["Shockwave Flash"]==
w){if((j=E.plugins["Shockwave Flash"].description)&&!(typeof E.mimeTypes!=q&&E.mimeTypes[u]&&!E.mimeTypes[u].enabledPlugin))J=!0,m=!1,j=j.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),k[0]=parseInt(j.replace(/^(.*)\..*$/,"$1"),10),k[1]=parseInt(j.replace(/^.*\.(.*)\s.*$/,"$1"),10),k[2]=/[a-zA-Z]/.test(j)?parseInt(j.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof y.ActiveXObject!=q)try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e&&(j=e.GetVariable("$version")))m=!0,j=j.split(" ")[1].split(","),
k=[parseInt(j[0],10),parseInt(j[1],10),parseInt(j[2],10)]}catch(g){}return{w3:a,pv:k,wk:d,ie:m,win:c,mac:b}}();(function(){n.w3&&((typeof o.readyState!=q&&"complete"==o.readyState||typeof o.readyState==q&&(o.getElementsByTagName("body")[0]||o.body))&&a(),F||(typeof o.addEventListener!=q&&o.addEventListener("DOMContentLoaded",a,!1),n.ie&&n.win&&(o.attachEvent("onreadystatechange",function(){"complete"==o.readyState&&(o.detachEvent("onreadystatechange",arguments.callee),a())}),y==top&&function(){if(!F){try{o.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,
0);return}a()}}()),n.wk&&function(){F||(/loaded|complete/.test(o.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){n.ie&&n.win&&window.attachEvent("onunload",function(){for(var a=C.length,d=0;d<a;d++)C[d][0].detachEvent(C[d][1],C[d][2]);a=H.length;for(d=0;d<a;d++)k(H[d]);for(var b in n)n[b]=null;n=null;for(var c in swfobject)swfobject[c]=null;swfobject=null})})();return{registerObject:function(a,d,b,c){if(n.w3&&a&&d){var m={};m.id=a;m.swfVersion=d;m.expressInstall=b;m.callbackFn=
c;z[z.length]=m;r(a,!1)}else c&&c({success:!1,id:a})},getObjectById:function(a){if(n.w3)return f(a)},embedSWF:function(a,c,m,k,j,e,g,h,f,A){var u={success:!1,id:c};n.w3&&!(n.wk&&312>n.wk)&&a&&c&&m&&k&&j?(r(c,!1),b(function(){m+="";k+="";var b={};if(f&&typeof f===w)for(var x in f)b[x]=f[x];b.data=a;b.width=m;b.height=k;x={};if(h&&typeof h===w)for(var o in h)x[o]=h[o];if(g&&typeof g===w)for(var n in g)x.flashvars=typeof x.flashvars!=q?x.flashvars+("&"+n+"="+g[n]):n+"="+g[n];if(v(j))o=d(b,x,c),b.id==
c&&r(c,!0),u.success=!0,u.ref=o;else{if(e&&l()){b.data=e;p(b,x,c,A);return}r(c,!0)}A&&A(u)})):A&&A(u)},switchOffAutoHideShow:function(){O=!1},ua:n,getFlashPlayerVersion:function(){return{major:n.pv[0],minor:n.pv[1],release:n.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(a,b,c){if(n.w3)return d(a,b,c)},showExpressInstall:function(a,d,b,c){n.w3&&l()&&p(a,d,b,c)},removeSWF:function(a){n.w3&&k(a)},createCSS:function(a,d,b,c){n.w3&&g(a,d,b,c)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var d=
o.location.search||o.location.hash;if(d){/\?/.test(d)&&(d=d.split("?")[1]);if(null==a)return I(d);for(var d=d.split("&"),b=0;b<d.length;b++)if(d[b].substring(0,d[b].indexOf("="))==a)return I(d[b].substring(d[b].indexOf("=")+1))}return""},expressInstallCallback:function(){if(K){var a=m(B);if(a&&A){a.parentNode.replaceChild(A,a);if(L&&(r(L,!0),n.ie&&n.win))A.style.display="block";x&&x(N)}K=!1}}}}();/*
 
 jQuery Tools 3.2.6 / Flashembed - New wave Flash embedding

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/toolbox/flashembed.html

 Since : March 2008
 Date  : @DATE 
*/
(function(){function a(d){if(!d||"object"!=typeof d)return d;var b=new d.constructor,c;for(c in d)d.hasOwnProperty(c)&&(b[c]=a(d[c]));return b}function b(a,d){if(a){var b,c=0,k=a.length;if(void 0===k)for(b in a){if(!1===d.call(a[b],b,a[b]))break}else for(b=a[0];c<k&&!1!==d.call(b,c,b);b=a[++c]);return a}}function c(a,d,c){if("object"!=typeof d)return a;a&&d&&b(d,function(d,b){if(!c||"function"!=typeof b)a[d]=b});return a}function e(a){var d=a.indexOf(".");if(-1!=d){var c=a.slice(0,d)||"*",k=a.slice(d+
1,a.length),e=[];b(document.getElementsByTagName(c),function(){this.className&&-1!=this.className.indexOf(k)&&e.push(this)});return e}}function h(a){a=a||window.event;a.preventDefault?(a.stopPropagation(),a.preventDefault()):(a.returnValue=!1,a.cancelBubble=!0);return!1}function f(a,d,b){a[d]=a[d]||[];a[d].push(b)}function l(){return"_"+(""+Math.random()).slice(2,10)}function p(m,j,e){var g=this,r=null,I=!1,q,w,u=[],B={},p={},o,s,J,G,z,H;c(g,{id:function(){return o},isLoaded:function(){return null!==
r&&void 0!==r.fp_play&&!I},getParent:function(){return m},hide:function(a){if(a)m.style.height="0px";if(g.isLoaded())r.style.height="0px";return g},show:function(){m.style.height=H+"px";if(g.isLoaded())r.style.height=z+"px";return g},isHidden:function(){return g.isLoaded()&&0===parseInt(r.style.height,10)},load:function(a){if(!g.isLoaded()&&!1!==g._fireEvent("onBeforeLoad")){var d=0;b(k,function(){this.unload(function(){if(++d==k.length){if((q=m.innerHTML)&&!flashembed.isSupported(j.version))m.innerHTML=
"";if(a)a.cached=!0,f(p,"onLoad",a);flashembed(m,j,{config:e})}})})}return g},unload:function(a){if(this.isFullscreen()&&/WebKit/i.test(navigator.userAgent))return a&&a(!1),g;if(""!==q.replace(/\s/g,"")){if(!1===g._fireEvent("onBeforeUnload"))return a&&a(!1),g;I=!0;try{r&&(r.fp_close(),g._fireEvent("onUnload"))}catch(d){}setTimeout(function(){r=null;m.innerHTML=q;I=!1;a&&a(!0)},50)}else a&&a(!1);return g},getClip:function(a){void 0===a&&(a=G);return u[a]},getCommonClip:function(){return w},getPlaylist:function(){return u},
getPlugin:function(a){var b=B[a];if(!b&&g.isLoaded()){var c=g._api().fp_getPlugin(a);c&&(b=new d(a,c,g),B[a]=b)}return b},getScreen:function(){return g.getPlugin("screen")},getControls:function(){return g.getPlugin("controls")._fireEvent("onUpdate")},getLogo:function(){try{return g.getPlugin("logo")._fireEvent("onUpdate")}catch(a){}},getPlay:function(){return g.getPlugin("play")._fireEvent("onUpdate")},getConfig:function(d){return d?a(e):e},getFlashParams:function(){return j},loadPlugin:function(a,
b,c,k){"function"==typeof c&&(k=c,c={});var m=k?l():"_";g._api().fp_loadPlugin(a,b,c,m);b={};b[m]=k;k=new d(a,null,g,b);return B[a]=k},getState:function(){return g.isLoaded()?r.fp_getState():-1},play:function(a,d){var b=function(){void 0!==a?g._api().fp_play(a,d):g._api().fp_play()};g.isLoaded()?b():I?setTimeout(function(){g.play(a,d)},50):g.load(function(){b()});return g},getVersion:function(){if(g.isLoaded()){var a=r.fp_getVersion();a.push("flowplayer.js 3.2.6");return a}return"flowplayer.js 3.2.6"},
_api:function(){if(!g.isLoaded())throw"Flowplayer "+g.id()+" not loaded when calling an API method";return r},setClip:function(a){g.setPlaylist([a]);return g},getIndex:function(){return J},_swfHeight:function(){return r.clientHeight}});b("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut".split(","),function(){var a="on"+this;if(-1!=a.indexOf("*")){var a=a.slice(0,a.length-1),d="onBefore"+a.slice(2);g[d]=function(a){f(p,
d,a);return g}}g[a]=function(d){f(p,a,d);return g}});b("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed,setKeyboardShortcutsEnabled,isKeyboardShortcutsEnabled".split(","),function(){var a=this;g[a]=function(d,b){if(!g.isLoaded())return g;var c=null,c=void 0!==d&&void 0!==b?r["fp_"+a](d,b):void 0===d?r["fp_"+a]():r["fp_"+a](d);return"undefined"===c||
void 0===c?g:c}});g._fireEvent=function(a){"string"==typeof a&&(a=[a]);var d=a[0],c=a[1],k=a[2],m=a[3],j=0;e.debug&&console.log("$f.fireEvent",[].slice.call(a));!g.isLoaded()&&"onLoad"==d&&"player"==c&&(r=r||document.getElementById(s),z=g._swfHeight(),b(u,function(){this._fireEvent("onLoad")}),b(B,function(a,d){d._fireEvent("onUpdate")}),w._fireEvent("onLoad"));if(!("onLoad"==d&&"player"!=c)){if("onError"==d&&("string"==typeof c||"number"==typeof c&&"number"==typeof k))c=k,k=m;if("onContextMenu"==
d)b(e.contextMenu[c],function(a,d){d.call(g)});else if("onPluginEvent"==d||"onBeforePluginEvent"==d){if(m=B[c.name||c])return m._fireEvent("onUpdate",c),m._fireEvent(k,a.slice(3))}else{if("onPlaylistReplace"==d){u=[];var h=0;b(c,function(){u.push(new t(this,h++,g))})}if("onClipAdd"==d){if(c.isInStream)return;c=new t(c,k,g);u.splice(k,0,c);for(j=k+1;j<u.length;j++)u[j].index++}var f=!0;if("number"==typeof c&&c<u.length&&(G=c,(a=u[c])&&(f=a._fireEvent(d,k,m)),!a||!1!==f))f=w._fireEvent(d,k,m,a);b(p[d],
function(){f=this.call(g,c,k);this.cached&&p[d].splice(j,1);if(!1===f)return!1;j++});return f}}};if("string"==typeof m){var C=document.getElementById(m);if(!C)throw"Flowplayer cannot access element: "+m;m=C}(function(){function a(d){var b=g.hasiPadSupport&&g.hasiPadSupport();if(/iPad|iPhone|iPod/i.test(navigator.userAgent)&&!/.flv$/i.test(u[0].url)&&!b)return!0;!g.isLoaded()&&!1!==g._fireEvent("onBeforeClick")&&g.load();return h(d)}$f(m)?($f(m).getParent().innerHTML="",J=$f(m).getIndex(),k[J]=g):
(k.push(g),J=k.length-1);H=parseInt(m.style.height,10)||m.clientHeight;o=m.id||"fp"+l();s=j.id||o+"_api";j.id=s;e.playerId=o;"string"==typeof e&&(e={clip:{url:e}});if("string"==typeof e.clip)e.clip={url:e.clip};e.clip=e.clip||{};if(m.getAttribute("href",2)&&!e.clip.url)e.clip.url=m.getAttribute("href",2);w=new t(e.clip,-1,g);e.playlist=e.playlist||[e.clip];var c=0;b(e.playlist,function(){var a=this;"object"==typeof a&&a.length&&(a={url:""+a});b(e.clip,function(d,b){void 0!==b&&void 0===a[d]&&"function"!=
typeof b&&(a[d]=b)});e.playlist[c]=a;a=new t(a,c,g);u.push(a);c++});b(e,function(a,d){if("function"==typeof d){if(w[a])w[a](d);else f(p,a,d);delete e[a]}});b(e.plugins,function(a,b){b&&(B[a]=new d(a,b,g))});if(!e.plugins||void 0===e.plugins.controls)B.controls=new d("controls",null,g);B.canvas=new d("canvas",null,g);q=m.innerHTML;setTimeout(function(){""!==q.replace(/\s/g,"")?m.addEventListener?m.addEventListener("click",a,!1):m.attachEvent&&m.attachEvent("onclick",a):(m.addEventListener&&m.addEventListener("click",
h,!1),g.load())},0)})()}function s(a){this.length=a.length;this.each=function(d){b(a,d)};this.size=function(){return a.length}}var t=function(a,d,k){var e=this,h={},p={};e.index=d;"string"==typeof a&&(a={url:a});c(this,a,!0);b("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop".split(","),function(){var a="on"+this;if(-1!=a.indexOf("*")){var a=a.slice(0,a.length-1),b="onBefore"+a.slice(2);e[b]=function(a){f(p,b,a);return e}}e[a]=function(d){f(p,a,
d);return e};-1==d&&(e[b]&&(k[b]=e[b]),e[a]&&(k[a]=e[a]))});c(this,{onCuepoint:function(a,b){if(1==arguments.length)return h.embedded=[null,a],e;"number"==typeof a&&(a=[a]);var c=l();h[c]=[a,b];k.isLoaded()&&k._api().fp_addCuepoints(a,d,c);return e},update:function(a){c(e,a);k.isLoaded()&&k._api().fp_updateClip(a,d);var b=k.getConfig();c(-1==d?b.clip:b.playlist[d],a,!0)},_fireEvent:function(a,m,f,l){if("onLoad"==a)return b(h,function(a,b){b[0]&&k._api().fp_addCuepoints(b[0],d,a)}),!1;l=l||e;if("onCuepoint"==
a){var o=h[m];if(o)return o[1].call(k,l,f)}if(m&&-1!="onBeforeBegin,onMetaData,onStart,onUpdate,onResume".indexOf(a)&&(c(l,m),m.metaData))l.duration?l.fullDuration=m.metaData.duration:l.duration=m.metaData.duration;var q=!0;b(p[a],function(){q=this.call(k,l,m,f)});return q}});if(a.onCuepoint){var q=a.onCuepoint;e.onCuepoint.apply(e,"function"==typeof q?[q]:q);delete a.onCuepoint}b(a,function(d,b){"function"==typeof b&&(f(p,d,b),delete a[d])});if(-1==d)k.onCuepoint=this.onCuepoint},d=function(a,d,
k,e){var f=this,h={},p=!1;e&&c(h,e);b(d,function(a,b){"function"==typeof b&&(h[a]=b,delete d[a])});c(this,{animate:function(b,c,e){if(!b)return f;"function"==typeof c&&(e=c,c=500);if("string"==typeof b){var g=b,b={};b[g]=c;c=500}if(e){var o=l();h[o]=e}void 0===c&&(c=500);d=k._api().fp_animate(a,b,c,o);return f},css:function(b,e){if(void 0!==e){var g={};g[b]=e;b=g}d=k._api().fp_css(a,b);c(f,d);return f},show:function(){this.display="block";k._api().fp_showPlugin(a);return f},hide:function(){this.display=
"none";k._api().fp_hidePlugin(a);return f},toggle:function(){this.display=k._api().fp_togglePlugin(a);return f},fadeTo:function(d,b,c){"function"==typeof b&&(c=b,b=500);if(c){var e=l();h[e]=c}this.display=k._api().fp_fadeTo(a,d,b,e);this.opacity=d;return f},fadeIn:function(a,d){return f.fadeTo(1,a,d)},fadeOut:function(a,d){return f.fadeTo(0,a,d)},getName:function(){return a},getPlayer:function(){return k},_fireEvent:function(d,e){if("onUpdate"==d){var j=k._api().fp_getPlugin(a);if(!j)return;c(f,j);
delete f.methods;p||(b(j.methods,function(){var d=""+this;f[d]=function(){var b=[].slice.call(arguments),b=k._api().fp_invoke(a,d,b);return"undefined"===b||void 0===b?f:b}}),p=!0)}return(j=h[d])?(j=j.apply(f,e),"_"==d.slice(0,1)&&delete h[d],j):f}})},k=[];window.flowplayer=window.$f=function(){var d=null,j=arguments[0];if(!arguments.length)return b(k,function(){if(this.isLoaded())return d=this,!1}),d||k[0];if(1==arguments.length){if("number"==typeof j)return k[j];if("*"==j)return new s(k);b(k,function(){if(this.id()==
j.id||this.id()==j||this.getParent()==j)return d=this,!1});return d}if(1<arguments.length){var f=arguments[1],g=3==arguments.length?arguments[2]:{};"string"==typeof f&&(f={src:f});f=c({bgcolor:"#000000",version:[9,0],expressInstall:"http://static.flowplayer.org/swf/expressinstall.swf",cachebusting:!1},f);if("string"==typeof j){if(-1!=j.indexOf(".")){var h=[];b(e(j),function(){h.push(new p(this,a(f),a(g)))});return new s(h)}var l=document.getElementById(j);return new p(null!==l?l:j,f,g)}if(j)return new p(j,
f,g)}return null};c(window.$f,{fireEvent:function(){var a=[].slice.call(arguments),d=$f(a[0]);return d?d._fireEvent(a.slice(1)):null},addPlugin:function(a,d){p.prototype[a]=d;return $f},each:b,extend:c});if("function"==typeof jQuery)jQuery.fn.flowplayer=function(d,b){if(!arguments.length||"number"==typeof arguments[0]){var c=[];this.each(function(){var a=$f(this);a&&c.push(a)});return arguments.length?c[arguments[0]]:new s(c)}return this.each(function(){$f(this,a(d),b?a(b):{})})}})();
(function(){function a(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function b(a,b){var c=[],e;for(e in a)a.hasOwnProperty(e)&&(c[e]=b(a[e]));return c}function c(d,b,c){if(s.isSupported(b.version))d.innerHTML=s.getHTML(b,c);else if(b.expressInstall&&s.isSupported([6,65]))d.innerHTML=s.getHTML(a(b,{src:b.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else{if(!d.innerHTML.replace(/\s/g,"")&&(d.innerHTML="<h2>Flash version "+b.version+
" or greater is required</h2><h3>"+(0<t[0]?"Your version is "+t:"You have no flash plugin installed")+"</h3>"+("A"==d.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+h+"'>here</a></p>"),"A"==d.tagName))d.onclick=function(){location.href=h};if(b.onFail){var j=b.onFail.call(this);if("string"==typeof j)d.innerHTML=j}}e&&(window[b.id]=document.getElementById(b.id));a(this,{getRoot:function(){return d},getOptions:function(){return b},getConf:function(){return c},
getApi:function(){return d.firstChild}})}var e=document.all,h="http://www.adobe.com/go/getflashplayer",f="function"==typeof jQuery,l=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,p={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}});
window.flashembed=function(d,b,e){"string"==typeof d&&(d=document.getElementById(d.replace("#","")));if(d)return"string"==typeof b&&(b={src:b}),new c(d,a(a({},p),b),e)};var s=a(window.flashembed,{conf:p,getVersion:function(){var a,b;try{b=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(c){try{b=(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"))&&a.GetVariable("$version")}catch(e){try{b=(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"))&&a.GetVariable("$version")}catch(f){}}}return(b=
l.exec(b))?[b[1],b[3]]:[0,0]},asString:function(a){if(null===a||void 0===a)return null;var c=typeof a;"object"==c&&a.push&&(c="array");switch(c){case "string":return a=a.replace(RegExp('(["\\\\])',"g"),"\\$1"),a=a.replace(/^\s?(\d+\.?\d+)%/,"$1pct"),'"'+a+'"';case "array":return"["+b(a,function(a){return s.asString(a)}).join(",")+"]";case "function":return'"function()"';case "object":var c=[],e;for(e in a)a.hasOwnProperty(e)&&c.push('"'+e+'":'+s.asString(a[e]));return"{"+c.join(",")+"}"}return(""+
a).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(d,b){var d=a({},d),c='<object width="'+d.width+'" height="'+d.height+'" id="'+d.id+'" name="'+d.id+'"';d.cachebusting&&(d.src+=(-1!=d.src.indexOf("?")?"&":"?")+Math.random());c=d.w3c||!e?c+(' data="'+d.src+'" type="application/x-shockwave-flash"'):c+' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"';c+=">";if(d.w3c||e)c+='<param name="movie" value="'+d.src+'" />';d.width=d.height=d.id=d.w3c=d.src=null;d.onFail=d.version=d.expressInstall=
null;for(var j in d)d[j]&&(c+='<param name="'+j+'" value="'+d[j]+'" />');j="";if(b){for(var f in b)if(b[f]){var g=b[f];j+=f+"="+(/function|object/.test(typeof g)?s.asString(g):g)+"&"}j=j.slice(0,-1);c+='<param name="flashvars" value=\''+j+"' />"}return c+"</object>"},isSupported:function(a){return t[0]>a[0]||t[0]==a[0]&&t[1]>=a[1]}}),t=s.getVersion();if(f)jQuery.tools=jQuery.tools||{version:"3.2.6"},jQuery.tools.flashembed={conf:p},jQuery.fn.flashembed=function(a,b){return this.each(function(){jQuery(this).data("flashembed",
flashembed(this,a,b))})}})();(function(a){function b(){this.remoteNodeSet={};this.adContextManager=this.pixels=this.dispatcher=null;this.accountKey="";this.playerInfo={};this.timerInfo={};this.videoID=null;this.stage=!1;this._id=++b._id}function c(a,b,e){this.id=a;this.key=b;e?(this.server=this.protocol()+"//l2-stage.visiblemeasures.com",this.audienceServer=this.protocol()+"//audience-stage.visiblemeasures.com"):(this.server="http://l2.visiblemeasures.com",this.audienceServer="http://audience.visiblemeasures.com");this.holdingQueue=
[];this.dispatchQueue=[];this.dispatchFailed=this.isDispatching=!1;this.guidCounter=this.counter=0;this.lastObjectId=null;this.cookiesEnabled=!1;this.BASE_STRING="5BB9E709A4BC291CB19F278D520D952920C04F70";this.ALPHA_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.audienceLoaded=this.debugMode=!1;this.l=VMCLogger.getInstance();c.register(this);this.loadUserAndSession();this.adContextManager=null}function e(){}function h(){this.clipID=null;this.viewID=this.generateViewID();
this.firstView=!0}function f(){}function l(d,b){this.dispatcher=d;this.pixels=b;this.viewManager=h.getInstance();this.viewPending=!1;this.pageUrl=this.cleanUrl(a.location.href);this.referrerUrl=this.cleanUrl(document.referrer);this.encoding=null;this.playerInfo={};this.clipInfo={};this.nonLinearAdTimer=null}function p(d,b,c){this.FIRST_SEGMENT_BUFFER=500;this.LAST_SEGMENT_BUFFER=1500;this.SCRUB_FORWARDS_BUFFER=2E3;this.SCRUB_BACKWARDS_BUFFER=500;this.l=VMCLogger.getInstance();this.listeners={};this.beaconInterval=
this.duration=0;this.beaconFlags=[];this.playthruFlags=[];this.holdingBeaconZero=this.holdBeacons=!1;this.viewingTime=this.lastPosition=0;this.scrubbing=!1;this.scrubStartPosition=0;this.property=d;this.target=b;this.units=c?c:"milliseconds";this.runHandler=function(){return arguments.callee.method.apply(arguments.callee.target,arguments)};this.runHandler.target=this;this.runHandler.method=this.run;this.intervalID=a.setInterval(this.runHandler,500)}function s(){this.elapsedPlayTime=this.lastPlayStartTime=
0;this.playing=!1}function t(){this.l=VMCLogger.getInstance();this.adContexts={};this.onAdContextSet=null}b._id=b._id||1;b.prototype={destroy:function(){this.dispatcher&&this.dispatcher.dispose();this.pixels&&this.pixels.dispose();for(var a in this.remoteNodeSet)a&&a.dispose(),a=null;this.remoteNodeSet=null},configure:function(a){this.accountKey=a.accountKey;this.playerInfo=a.playerInfo;this.timerInfo=a.timerInfo;this.videoID=a.videoID;if(a.stage)this.stage=!0;this.adContextManager=new t;this.dispatcher=
new c(this._id,this.accountKey,this.stage);this.dispatcher.setAdContextManager(this.adContextManager);this.pixels=new VMCPixels(this._id,this.dispatcher);this.pixels.setAdContextManager(this.adContextManager);this.pixels.enable(!0);if(a.adTagPixels)this.pixels.adTagPixels=a.adTagPixels;if(a.adContextParams)this.pixels.adContextParams=a.adContextParams;a=this.getRemoteNode();this.timerInfo?this.instrumentGenericTimer(this.timerInfo,a):this.videoID&&this.instrumentVideo(this.videoID,a);a.playerLoaded(this.playerInfo)},
getRemoteNode:function(a){a||(a="default");this.remoteNodeSet[a]||(this.remoteNodeSet[a]=new l(this.dispatcher,this.pixels));return this.remoteNodeSet[a]},instrumentGenericTimer:function(a,b){a=new p(a.property,a.target,a.units);b.setTimer(a)},instrumentVideo:function(d,b){if(d=document.getElementById(d)){var c=function(){try{return arguments.callee.e.currentTime}catch(a){return console.log(a),0}};c.e=d;b.setTimer(new p(c,this,"seconds"));c=function(){arguments.callee.node.setClipDuration(1E3*arguments.callee.e.duration)};
c.e=d;c.node=b;a.addEventListener?d.addEventListener("loadedmetadata",c,!1):a.attachEvent&&d.attachEvent("onloadedmetadata",c)}}};b.getInstance=function(){if(!b.instance)b.instance=new b;return b.instance};a._vmc=b.getInstance();a.VMCUtility=b;c.MAX_QUEUE_SIZE=20;c.SESSION_TIMEOUT=18E5;c.AUDIENCE_CLIENT_TIMEOUT=5E3;c.obfuscate=!0;c.prototype={setAdContextManager:function(a){var b=this;this.adContextManager=a;this.adContextManager.onAdContextSet=function(){b.dispatchNext()}},dispose:function(){},encodeData:function(a){for(var b=
this.BASE_STRING.length,c=a.length,e=[],f=0;f<c;)for(var g=0;g<b&&f<c;g++,f++){var h=this.BASE_STRING.charCodeAt(g)^a.charCodeAt(f);e[f]=h}return this.base64(e)},base64:function(a){for(var b=0,c=new String(""),e,f,g,h,l,p;b<a.length;)e=a[b++],f=a[b++],g=a[b++],h=e>>2,e=(e&3)<<4|f>>4,l=(f&15)<<2|g>>6,p=g&63,isNaN(f)?l=p=64:isNaN(g)&&(p=64),c+=this.ALPHA_CHARS.charAt(h)+this.ALPHA_CHARS.charAt(e),c+=this.ALPHA_CHARS.charAt(l)+this.ALPHA_CHARS.charAt(p);return c},getObjectId:function(){var a=(new Date).getTime()+
":";do var b=a+this.counter++;while(null!=document.getElementById(b));return b},getQueryParam:function(a,b){return a+"="+escape(b).replace("+","%2B")},dispatch:function(){this.isDispatching=!0;var a=[];a.push(this.getQueryParam("key",this.key));a.push(this.getQueryParam("rnd",Math.random()));a.push(this.getQueryParam("up","1"));var b=this.dispatchQueue[0],c=b.featureCode,e=b.adContext?b.adContext:"";delete b.featureCode;delete b.adContext;for(var f in b){var g=b[f];null==g||"number"==typeof g&&isNaN(g)||
a.push(this.getQueryParam(f,g))}this.lastObjectId=this.getObjectId();a.push(this.getQueryParam("objectId",this.lastObjectId));a=a.join("&");c="/p/2/p/"+c+"/?"+a;0<e.length&&(c+="&"+e);var h=this;this.insertAndFirePixel(this.server+c,function(){h.dispatchComplete()})},dispatchNext:function(){if(!this.isDispatching&&this.audienceLoaded)this.dispatchFailed?(this.dispatchFailed=!1,this.dispatch()):0<this.holdingQueue.length&&this.adContextManager.canDispatch(this.holdingQueue[0])&&(this.adContextManager.appendContextToDispatchObject(this.holdingQueue[0]),
this.dispatchQueue.push(this.holdingQueue.shift()),this.dispatch())},dispatchComplete:function(){this.dispatchQueue=[];this.isDispatching=!1;this.dispatchNext()},logFeature:function(a){if(!(this.holdingQueue.length>c.MAX_QUEUE_SIZE)){var b={},e;for(e in a)b[e]=a[e];this.holdingQueue.push(b);this.dispatchNext()}},loadUserAndSession:function(){this.audienceLoaded=!1;var a=(new Date).getTime(),b="/u/getuid/?j=1&nocache="+a;this.key&&0<this.key.length&&(b+="&a="+this.key);b+="&callback_id="+this.id;this.createScriptElement("audience_"+
a,this.audienceServer+b)},loadUserAndSessionComplete:function(a,b,c,e,f){this.userData={id:a};this.sessionData={id:b};if(e&&(this.debugMode=!0,f))this.server=f;this.audienceLoaded=!0;this.dispatchNext()},loadPixelPackage:function(a){if(!(null==this.key||0==this.key.length)){this.l.info("Loading ODPP");var b=(new Date).getTime(),a="/odpp/?j=1&nocache="+b+"&account_key="+this.key+"&clip_id="+a,a=a+("&callback_id="+this.id);this.createScriptElement("odpp_"+b,this.audienceServer+a)}},createScriptElement:function(a,
b){try{var c=document.createElement("script");c.id=a;c.src=b;c.defer="defer";var e=document.getElementsByTagName("head").item(0);null!=e&&e.appendChild(c)}catch(f){}},insertAndFirePixel:function(a,b){var c=document,e=c.createElement("img");e.style.display="none";e.onload=function(){b.done=!0;e.parentNode.removeChild(e);b()};e.src=a;c.body.appendChild(e)},protocol:function(){return"https:"==a.location.protocol?"https:":"http:"}};c.getInstance=function(){throw{name:"Unsupported Access Method",description:"Calling getInstance on VMCDispatcher is no longer supported.  Service callbacks should use VMCDispatcher.findInstance(id)."};
};c._instances=c._instances||{};c.register=function(a){if(c._instances[a.id])throw{name:"VMCDispatcherAlreadyRegistered",description:"An instance of VMCDispatcher with this id has already been registered.",data:a.id};c._instances[a.id]=a};c.findInstance=function(a){if(c._instances[a])return c._instances[a];VMCLogger.getInstance().error("Got request for non-existent VMCDispatcher instance: "+a);return null};c.i=c.getInstance;c.prototype.c=c.prototype.dispatchComplete;c.prototype.u=c.prototype.loadUserAndSessionComplete;
a.VMCDispatcher=c;e.VERSION="2.6.0+build.5.9dc91e6faf8b1bc76c6d08c2d505b40ed0eb41b3";h.prototype={clipViewed:function(a,b,c){if(0==c){if(this.clipID!=a){this.clipID=a;if(!this.firstView)this.viewID=this.generateViewID();this.fiewView=!1}}else if(1==c&&this.clipID!=b&&b){this.clipID=b;if(!this.firstView)this.viewID=this.generateViewID();this.firstView=!1}},getViewID:function(){return this.viewID},generateViewID:function(){return""+(new Date).getTime()}};h.getInstance=function(){if(!h.instance)h.instance=
new h;return h.instance};f.LINEAR_GENERIC=0;f.LINEAR_PREROLL=1;f.LINEAR_MIDROLL=2;f.LINEAR_POSTROLL=3;f.LINEAR_INTERACTIVE=4;f.OVERLAY_INVITATION_STATIC=5;f.OVERLAY_INVITATION_VIDEO=6;f.OVERLAY_INVITATION_INTERACTIVE=7;f.OVERLAY_VIDEO=8;f.OVERLAY_PRODUCT_PLACEMENT=9;f.OVERLAY_GENERIC=10;f.isLinear=function(a){return a in[f.LINEAR_GENERIC,f.LINEAR_PREROLL,f.LINEAR_MIDROLL,f.LINEAR_POSTROLL,f.LINEAR_INTERACTIVE,f.OVERLAY_VIDEO,f.OVERLAY_INVITATION_VIDEO]};f.valueOf=function(a){if(isNaN(a))switch(a){case "LA":return f.LINEAR_GENERIC;
case "LPR":return f.LINEAR_PREROLL;case "LPM":return f.LINEAR_MIDROLL;case "LPO":return f.LINEAR_POSTROLL;case "LI":return f.LINEAR_INTERACTIVE;case "NLOIS":return f.OVERLAY_INVITATION_STATIC;case "NLOIV":return f.OVERLAY_INVITATION_VIDEO;case "NLOI":return f.OVERLAY_INVITATION_INTERACTIVE;case "NLOV":return f.OVERLAY_VIDEO;case "NLOPP":return f.OVERLAY_PRODUCT_PLACEMENT;case "NLA":return f.OVERLAY_GENERIC;default:return f.LINEAR_GENERIC}else return a};l.ASSET_TYPE_VIDEO=0;l.ASSET_TYPE_AD=1;l.playerLoaded=
!1;l.prototype={dispose:function(){},setTimer:function(a){this.timer&&(this.timer.removeEventListener("progress",this),this.timer.removeEventListener("beacon",this),delete this.timer);this.timer=a;this.timer.addEventListener("progress",this);this.timer.addEventListener("beacon",this)},getTimer:function(){return this.timer},playerLoaded:function(a){a||(a={});this.playerInfo&&delete this.playerInfo;this.playerInfo={};this.playerInfo.id=a.id?a.id:"1";if(a.hostPage)this.pageUrl=a.hostPage;if(a.hostReferrer)this.referrerUrl=
a.hostReferrer;if(a.encoding)this.encoding=a.encoding;this.logPlayerFeature("101")},setClipDuration:function(a){if(!(isNaN(a)||0>=a))this.clipInfo&&this.clipInfo.id&&!this.clipInfo.duration?(this.clipInfo.duration=a,this.timer.setDuration(a),this.logPlayerFeature("104"),this.pixels.videoEvent({typ:"videoRequest",clipID:this.clipInfo.id})):this.duration=a},trim:function(a,b){return null!=a&&0<b?a.substr(0,b):a},setClipInfo:function(a){this.clipInfo&&delete this.clipInfo;this.clipInfo={};this.clipInfo.id=
this.trim(a.id?a.id:"0",256);this.clipInfo.title=this.trim(a.title,512);this.clipInfo.description=this.trim(a.description,1E3);this.clipInfo.duration=a.duration?a.duration:0;this.clipInfo.category=this.trim(a.category,64);this.clipInfo.flvSourceUrl=this.trim(a.flvSourceUrl,1E3);this.clipInfo.thumbnailUrl=this.trim(a.thumbnailUrl,1E3);this.clipInfo.franchise=this.trim(a.franchise,64);this.clipInfo.tags=a.tags&&"object"==typeof a.tags?this.trim(a.tags.join(","),256):this.trim(a.tags,256);for(var b=
1;2>=b;b++)this.clipInfo["custom"+b]=this.trim(a["custom"+b],128);this.clipInfo.assetType=a.assetType?a.assetType:0;if(this.clipInfo.assetType==l.ASSET_TYPE_AD)this.clipInfo.adFormat=f.valueOf(a.adFormat),this.clipInfo.contentLinkID=this.trim(a.contentLinkId,256),this.clipInfo.campaign=this.trim(a.campaign,64)},sendClipInfo:function(a){this.setClipInfo(a);this.clipInfo.duration&&this.logPlayerFeature("104")},clipViewed:function(a,b,c){this.timer.reset();this.setClipInfo(a);this.viewManager.clipViewed(this.clipInfo.id,
this.clipInfo.contentLinkID,this.clipInfo.assetType);this.viewPending=!0;(b||c)&&this.pixels.loadPixels(this.clipInfo.id,null,b,c);this.pixels.videoEvent({typ:"videoRequest",clipID:this.clipInfo.id});if(null!=this.duration&&0<this.duration)this.clipInfo.duration=this.duration,this.duration=null;if(this.clipInfo.duration||this.clipInfo.assetType==l.ASSET_TYPE_AD&&!f.isLinear(this.clipInfo.adFormat))this.timer.setDuration(this.clipInfo.duration),this.logPlayerFeature("104")},clipPlayed:function(){if(this.viewPending)this.viewPending=
!1,this.timer.resetPlaythru(),this.logPlayerFeature("106"),this.pixels.videoEvent({typ:"videoView",clipID:this.clipInfo.id})},adImpression:function(a){this.nonLinearAdTimer=new s;this.clipViewed(a)},adImpressionPlayed:function(){this.nonLinearAdTimer.play();this.clipPlayed()},adImpressionCompleted:function(){this.nonLinearAdTimer.pause();this.clipCompleted()},logReferral:function(a){var b;switch(a){case "rss":b="rss";break;case "link":b="link";break;case "blog":b="blog";break;case "email":b="email";
break;case "embed":b="embed";break;case "fb":b="fb";break;case "twit":b="tw";break;case "cust01":b="01";break;case "cust02":b="02";break;case "cust03":b="03";break;case "cust04":b="04";break;case "cust05":b="05"}this.logPlayerFeature("130",{id:this.clipInfo.id,sh:b})},logReferEmail:function(){this.logReferral("email")},logReferEmbed:function(){this.logReferral("embed")},logReferLink:function(){this.logReferral("link")},logReferRSS:function(){this.logReferral("rss")},logReferBlog:function(){this.logReferral("blog")},
logReferFacebook:function(){this.logReferral("fb")},logReferTwitter:function(){this.logReferral("twit")},logReferCustom01:function(){this.logReferral("cust01")},logReferCustom02:function(){this.logReferral("cust02")},logReferCustom03:function(){this.logReferral("cust03")},logReferCustom04:function(){this.logReferral("cust04")},logReferCustom05:function(){this.logReferral("cust05")},logCustomEvent:function(a){this.logPlayerFeature("199",{ec:a})},logPlayerFeature:function(a,b){b||(b={});var c={};c.vid=
this.viewManager.getViewID();if(this.clipInfo.assetType)c.a=this.clipInfo.assetType;switch(a){case "101":c.id=this.playerInfo.id;c.u=this.pageUrl;c.r=this.referrerUrl;c.ver=e.VERSION;break;case "104":c.ttl=this.clipInfo.title;c.dsc=this.clipInfo.description;c.tgs=this.clipInfo.tags;c.drn=this.toSeconds(this.clipInfo.duration);c.ctg=this.clipInfo.category;c.fr=this.clipInfo.franchise;c.thm=this.clipInfo.thumbnailUrl;c.src=this.clipInfo.flvSourceUrl;c.c1=this.clipInfo.custom1;c.c2=this.clipInfo.custom2;
c.cmp=this.clipInfo.campaign;break;case "106":c.u=this.pageUrl;c.r=this.referrerUrl;c.adf=this.clipInfo.adFormat;c.lnk=this.clipInfo.contentLinkID;c.ctg=this.clipInfo.category;c.meta=0;break;case "108":c.b=b.segment;c.t="4,10";c.pt=b.playthru?"1":"0";c.ctg=this.clipInfo.category;break;case "130":c.id=null!=b.id?b.id:this.clipInfo.id;c.sh=b.sh;c.sgn=this.timer.getSegment();c.u=this.pageUrl;c.r=this.referrerUrl;break;case "199":c.ec=b.ec,c.u=this.pageUrl,c.r=this.referrerUrl,c.adf=this.clipInfo.adFormat,
c.lnk=this.clipInfo.contentLinkID}c.featureCode=a;if(!c.id)c.id=this.clipInfo.id;this.dispatcher.logFeature(c)},toSeconds:function(a){try{a=parseFloat((a/1E3).toFixed(2))}catch(b){}return a},beacon:function(a){a&&(this.logPlayerFeature("108",a),this.pixels.videoEvent({typ:"videoProgress",clipID:this.clipInfo.id,segment:a.segment,totalSegments:a.totalSegments}))},progress:function(){this.viewPending&&this.clipPlayed()},cleanUrl:function(a){var b=a.indexOf("?");-1!=b&&(a=a.substring(0,b));return a}};
l.prototype.setTimer=l.prototype.setTimer;l.prototype.getTimer=l.prototype.getTimer;l.prototype.playerLoaded=l.prototype.playerLoaded;l.prototype.setClipDuration=l.prototype.setClipDuration;l.prototype.setClipInfo=l.prototype.setClipInfo;l.prototype.clipViewed=l.prototype.clipViewed;l.prototype.clipPlayed=l.prototype.clipPlayed;l.prototype.clipCompleted=l.prototype.clipCompleted;l.prototype.adImpression=l.prototype.adImpression;l.prototype.adImpressionPlayed=l.prototype.adImpressionPlayed;l.prototype.adImpressionCompleted=
l.prototype.adImpressionCompleted;l.prototype.adRestore=l.prototype.adRestore;l.prototype.logReferEmbed=l.prototype.logReferEmbed;l.prototype.logReferEmail=l.prototype.logReferEmail;l.prototype.logReferBlog=l.prototype.logReferBlog;l.prototype.logReferLink=l.prototype.logReferLink;l.prototype.logReferRSS=l.prototype.logReferRSS;l.prototype.logCustomEvent=l.prototype.logCustomEvent;l.prototype.beacon=l.prototype.beacon;l.prototype.progress=l.prototype.progress;l.ASSET_TYPE_VIDEO=l.ASSET_TYPE_VIDEO;
l.ASSET_TYPE_AD=l.ASSET_TYPE_AD;l.VERSION=e.VERSION;a.VMCRemoteNode=l;p.TOTAL_SEGMENTS=20;p.prototype={removeEventListener:function(a,b){if(a=this.listeners[a])for(var c=0;c<a.length;c++)if(a[c]==b){a.splice(c,1);break}},addEventListener:function(a,b){var c=this.listeners[a];c||(this.listeners[a]=c=[]);this.removeEventListener(a,b);c.push(b)},dispatchEvent:function(a){var b=this.listeners[a.type];if(b)for(var c=0;c<b.length;c++){var e=b[c];"object"==typeof e?e[a.type](a):e.apply(this,[a])}},reset:function(){this.duration=
864E6;this.beaconInterval=this.duration/p.TOTAL_SEGMENTS;this.resetPlaythru();this.resetBeacons();this.holdBeacons=!0;this.holdingBeaconZero=!1;this.viewingTime=this.lastPosition=0},setDuration:function(a){p.TOTAL_SEGMENTS=20;this.duration=a;this.beaconInterval=a/p.TOTAL_SEGMENTS;this.holdBeacons=!1;if(this.holdingBeaconZero)this.holdingBeaconZero=!1,this.crossBeacon(0);if(1E4>=a)this.LAST_SEGMENT_BUFFER=a/10;if(5E3>=a)this.FIRST_SEGMENT_BUFFER=a/p.TOTAL_SEGMENTS},getDuration:function(){return this.duration},
getPosition:function(){var a;try{a="function"==typeof this.property?this.property.apply(this.target,[]):this.target[this.property]}catch(b){}if(isNaN(a)||0>a)a=0;switch(this.units){case "seconds":return 1E3*a;default:return a}},getSegment:function(){return this.duration?Math.floor(this.getPosition()/this.beaconInterval):0},getViewingTime:function(){return this.viewingTime},getPlaythruEnabled:function(a){return this.playthruFlags[a]},isRunning:function(){return!0},clearPlaythru:function(){this.playthruFlags=
[];for(var a=0;a<=p.TOTAL_SEGMENTS;a++)this.playthruFlags[a]=!1},resetPlaythru:function(){this.playthruFlags=[];for(var a=0;a<=p.TOTAL_SEGMENTS;a++)this.playthruFlags[a]=!0},resetBeacons:function(){this.beaconFlags=[];for(var a=0;a<=p.TOTAL_SEGMENTS;a++)this.beaconFlags[a]=!1},crossBeacon:function(a){if(0<=a&&a<=p.TOTAL_SEGMENTS&&!this.beaconFlags[a])this.holdBeacons?this.holdingBeaconZero=!0:(this.l.info("crossBeacon: beacon="+a+", pt="+this.playthruFlags[a]),0<a||0==a&&!this.playthruFlags[a]?this.dispatchEvent({type:"beacon",
segment:100*(a/p.TOTAL_SEGMENTS),totalSegments:p.TOTAL_SEGMENTS,playthru:this.playthruFlags[a],position:this.getPosition()}):this.l.info("not dispatching beacon event for "+a+", pt ="+this.playthruFlags[a]),this.beaconFlags[a]=!0,this.playthruFlags[a]=!1)},getBeaconPosition:function(a){return 0>=a?this.FIRST_SEGMENT_BUFFER:a<p.TOTAL_SEGMENTS?this.beaconInterval*a:this.duration-this.LAST_SEGMENT_BUFFER},getBeaconAtTime:function(a){return a<this.duration-this.LAST_SEGMENT_BUFFER?Math.floor(a/this.beaconInterval):
p.TOTAL_SEGMENTS},run:function(){if(this.isRunning()){var a=this.getPosition(),b=a-this.lastPosition;if(0<b)if(b>this.SCRUB_FORWARDS_BUFFER){if(!this.scrubbing)this.scrubbing=!0,this.scrubStartPosition=this.lastPosition}else{if(this.scrubbing){var c=this.lastPosition-this.scrubStartPosition;0<c&&this.clearPlaythru();this.resetBeacons();this.scrubbing=!1}this.viewingTime+=b;this.dispatchEvent({type:"progress",segment:this.getDuration()?this.getSegment():null,position:this.getPosition()});if(this.getDuration()){c=
this.getBeaconAtTime(this.lastPosition);for(b=this.getBeaconAtTime(a);c<=b;c++)if(0==c%2||0==c%5){var e=this.getBeaconPosition(c);this.lastPosition<=e&&a>=e&&this.crossBeacon(c)}}}else if(b<-this.SCRUB_BACKWARDS_BUFFER&&!this.scrubbing)this.scrubbing=!0,this.scrubStartPosition=this.lastPosition}this.lastPosition=this.getPosition()}};s.prototype={play:function(){if(!this.playing)this.playing=!0,this.lastPlayStartTime=(new Date).getTime()},pause:function(){if(this.playing)this.playing=!1,this.elapsedPlayTime+=
(new Date).getTime()-this.lastPlayStartTime},getElapsedPlayTime:function(){this.playing&&(this.elapsedPlayTime+=(new Date).getTime()-this.lastPlayStartTime);return this.elapsedPlayTime}};t.prototype={setAdContext:function(a,b){this.adContexts[a]={params:b,history:{}};this.l.info("in setAdContext w/"+arguments);null!=this.onAdContextSet&&this.onAdContextSet()},canDispatch:function(a){if(!this.hasAdContext(a))return!0;a=a.id;return!a?(this.l.warn("Expected attribute id (clipId) in dispatchObject"),
!0):null==this.findAdContext(a)?!1:!0},appendContextToDispatchObject:function(a){if(this.hasAdContext(a)){var b=a.id;if(b){var c=this.findAdContext(b);if(c){if(""!=c.params)a.adContext=c.params}else this.l.warn("Unexpected Null/undefined AdContext;  For ClipId "+b)}else this.l.warn("Expected attribute id (clipId) in dispatchObject")}},hasAdContext:function(a){var b=a.featureCode;if(!b)throw this.l.error("Expected 'featureCode' attribute in dispatchObject"),this.l.error(a),"No attribute 'feature' in dispatchObject";
return!("101"==b||"104"==b||"B"==b)},findAdContext:function(a){return this.adContexts[a]}};a.VMCAdContextManager=t})(window);
function VMCPixels(a,b){this.PROGRESS_EVENT_MAP={10:"tenpercent",20:"twentypercent",25:"firstQuartile",30:"thirtypercent",40:"fourtypercent",50:"midpoint",60:"sixtypercent",70:"seventypercent",75:"thirdQuartile",80:"eightypercent",90:"ninetypercent",100:"complete"};this.id=a;this._l=VMCLogger.getInstance();this.enabled=!1;this.pixelData={};this.clipData={};this.eventQueue=[];this.interval=null;this.eventHistory={};this.dispatcher=b;this.adContextParams=this.adContextManager=this.adTagPixels=null;
VMCPixels.register(this)}VMCPixels.DISPATCH_INTERVAL=1E3;
VMCPixels.prototype={setAdContextManager:function(a){this.adContextManager=a},enable:function(a){this.enabled=a},dispose:function(){if(VMCPixels.instance)VMCPixels.instance=null},videoEvent:function(a){if(!this.enabled)return!1;var b,c=a.clipID;b=a.typ;var e=b+"."+c;this._l.info("videoEvent: "+e);switch(b){case "videoRequest":if(null==this.clipData[c])this.eventHistory={},null==this.adTagPixels?(this.clipData[c]=!1,this.dispatcher.loadPixelPackage(c)):this.loadPixels(c,null,this.adTagPixels,this.adContextParams);
break;case "videoView":this.eventHistory[e]||(this.eventQueue.push({typ:"videoView",clipID:c}),this.eventHistory[e]=!0);this.processEvents();break;case "videoProgress":b=a=a.segment;this.PROGRESS_EVENT_MAP[b]&&(e=this.PROGRESS_EVENT_MAP[b].toLowerCase()+"."+c,this.eventHistory[e]||(this.eventQueue.push({typ:this.PROGRESS_EVENT_MAP[b],clipID:c,segment:a}),this.eventHistory[e]=!0),this.processEvents());break;default:VMCLogger.getInstance().warn("Unexpected event type: "+b)}return!0},processEvents:function(){this._l.info("processEvents");
for(var a=0;a<this.eventQueue.length;){var b=this.eventQueue[a];!0==this.clipData[b.clipID]?(this.processPixelEvent(b),this.eventQueue.splice(a,1)):(this._l.info("  waiting for pixel data to load"),a++);0<this.eventQueue.length&&setTimeout(function(){},VMCPixels.DISPATCH_INTERVAL)}},processPixelEvent:function(a){var b=this.findMatchingPixels(a);this._l.info("processPixelEvent: found "+b.length+" pixels for event "+a.typ+"."+a.clipID);if(b)for(a=0;a<b.length;a++)this.dispatchPixel(b[a])},findMatchingPixels:function(a){a=
a.typ.toLowerCase()+"."+a.clipID;return this.pixelData[a]?this.pixelData[a]:[]},loadPixels:function(a,b,c,e){this._l.info("loadPixels");null!=e?this.adContextManager.setAdContext(a,e.replace(/&amp;/g,"&")):this._l.warn("expected non-null adContextParams from loadPixels");for(event in c){b=this.transformEventNames(event);b=b.toLowerCase()+"."+a;this.pixelData[b]=[];for(e=c[event]?c[event].length:0;e--;){var h=this.trimPixel(c[event][e]);this.pixelData[b].push(h)}}this._l.info(this.pixelData);this.clipData[a]=
!0;this.processEvents()},transformEventNames:function(a){switch(a){case "view":a="videoView"}return a},dispatchPixel:function(a){this._l.info("dispatching "+a);try{var b=document.createElement("img"),c=(new Date).getTime(),a=a.replace("%%CACHEBUSTER%%",c);b.src=a;b.style.display="none";var e=document.getElementsByTagName("body").item(0);null!=e&&e.appendChild(b)}catch(h){}},trimPixel:function(a){try{return a.replace(/^\s+|\s+$/g,"")}catch(b){return a}}};
VMCPixels.getInstance=function(){throw{name:"UnsupportedAccessMethod",description:"Calling getInstance on VMCPixels is no longer supported.  Service callbacks should use VMCPixels.findInstance(id)."};};VMCPixels._instances=VMCPixels._instances||{};VMCPixels.register=function(a){if(VMCPixels._instances[a.id])throw{name:"VMCPixelsAlreadyRegistered",description:"An instance of VMCPixels with this id has already been registered.",data:a.id};VMCPixels._instances[a.id]=a};VMCPixels.findInstance=function(a){return VMCPixels._instances[a]};
window.VMCPixels=VMCPixels;function VMCLogger(){this.log_level=2;this.log=function(a,b){this.log_level>=a&&console&&console.log&&(a=new Date,console.log(a.toLocaleTimeString()+" >> "+b))};this.debug=function(a){this.log(3,a)};this.info=function(a){this.log(2,a)};this.warn=function(a){this.log(1,a)};this.error=function(a){this.log(0,a)}}VMCLogger.getInstance=function(){if(!VMCLogger.instance)VMCLogger.instance=new VMCLogger;return VMCLogger.instance};
window.visiblemeasures=window.visiblemeasures||{};visiblemeasures.YouTubePlayerWrapper=function(a,b,c,e){this._player=null;this._id=a;this._videoId=b;this._accountKey=c;this._reported={};this._playerOptions=e;this._isReady=!1;this._initialize()};
visiblemeasures.YouTubePlayerWrapper.prototype={_initialize:function(){visiblemeasures.Logger.log_level=3;this._l=visiblemeasures.Logger;this._l.debug(this._id+" YouTubePlayerWrapper created");this._loadYouTubeApi()},_checkYouTubeApi:function(){var a=this;this._l.debug(this._id+" in _checkYouTubeApi");window.YT&&window.YT.Player?this._readyYouTubeApi():setTimeout(function(){a._checkYouTubeApi()},500)},_loadYouTubeApi:function(){this._l.debug(this._id+" in _loadYouTubeApi");var a=document.createElement("script");
a.src="http://www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);this._checkYouTubeApi()},_readyYouTubeApi:function(){var a=this;this._l.debug(this._id+" in _readyYouTubeApi w/");this._l.debug(this._playerOptions);this._player=new YT.Player(this._id,{events:{onReady:function(b){if(!a._isReady)a._ready(b),a._isReady=!0},onStateChange:function(b){a._stateChange(b)}},width:this._playerOptions.width?this._playerOptions.width:300,height:this._playerOptions.height?
this._playerOptions.height:250,videoId:this._videoId,playerVars:{origin:this._getOrigin(),enablejsapi:1,autoplay:this._playerOptions.autoplay?1:0,rel:this._playerOptions.rel?1:0,showinfo:this._playerOptions.showinfo?1:0,theme:this._playerOptions.theme?this._playerOptions.theme:"dark",modestbranding:null!=this._playerOptions.modestbranding?this._playerOptions.modestbranding:1,controls:null!=this._playerOptions.controls?this._playerOptions.controls:1}})},_getOrigin:function(){try{return window.location.origin}catch(a){return null}},
_setupMeasurement:function(){this._l.debug(this._id+" in _setupMeasurement");(new visiblemeasures.YouTubeAdapter(this._id,this._accountKey,this._player,this._playerOptions)).initialize()},_ready:function(a){this._setupMeasurement();this._playerOptions.onReady&&this._playerOptions.onReady(a.target,this)},_stateChange:function(a){0==a.data&&!this._reported[a.data]&&this._playerOptions.onComplete&&(this._playerOptions.onComplete(),this._reported[a.data]=!0);1==a.data&&!this._reported[a.data]&&this._playerOptions.onView&&
(this._playerOptions.onView(),this._reported[a.data]=!0);this._playerOptions.onStateChange&&this._playerOptions.onStateChange(a.data)},getPlayer:function(){return this._player},toString:function(){return"YouTubePlayerWrapper#"+this._id}};
visiblemeasures.Logger={log_level:1,log:function(a,b){if(this.log_level>=a)try{if(console&&console.log)return console.log(b),!0}catch(c){return!0}else return!1},debug:function(a){return this.log(3,a)},info:function(a){return this.log(2,a)},warn:function(a){return this.log(1,a)},error:function(a){return this.log(0,a)}};window.visiblemeasures=window.visiblemeasures||{};
visiblemeasures.FlyJSONP=function(a){var b,c,e,h,f,l,p,s,t;c=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c};e=function(c,e){b.log("Garbage collecting!");e.parentNode.removeChild(e);a[c]=void 0;try{delete a[c]}catch(f){}};h=function(a,b){var c="",e,f;for(e in a)a.hasOwnProperty(e)&&(e=b?encodeURIComponent(e):e,f=b?encodeURIComponent(a[e]):a[e],c+=e+"="+f+"&");return c.replace(/&$/,"")};f=function(){for(var a="",a=[],b=0,b=0;32>b;b+=
1)a[b]="0123456789ABCDEF".substr(Math.floor(16*Math.random()),1);a[12]="4";a[16]="0123456789ABCDEF".substr(a[16]&3|8,1);return"flyjsonp_"+a.join("")};l=function(a,c){b.log(c);"undefined"!==typeof a&&a(c)};p=function(a,c){b.log("GET success");"undefined"!==typeof a&&a(c);b.log(c)};s=function(a,c){b.log("POST success");"undefined"!==typeof a&&a(c);b.log(c)};t=function(a){b.log("Request complete");"undefined"!==typeof a&&a()};b={options:{debug:!1}};b.init=function(a){var c;b.log("Initializing!");for(c in a)a.hasOwnProperty(c)&&
(b.options[c]=a[c]);b.log("Initialization options");b.log(b.options);return!0};b.log=function(c){a.console&&b.options.debug&&a.console.log(c)};b.get=function(d){var d=d||{},k=d.url,m=d.callbackParameter||"callback",j=d.parameters||{},v=a.document.createElement("script"),g=f(),r="?";if(!k)throw Error("URL must be specified!");j[m]=g;0<=k.indexOf("?")&&(r="&");k+=r+h(j,!0);a[g]=function(a){"undefined"===typeof a?l(d.error,"Invalid JSON data returned"):"post"===d.httpMethod?(a=a.query.results,!a||!a.postresult?
l(d.error,"Invalid JSON data returned"):(a=a.postresult.json?a.postresult.json:a.postresult,s(d.success,a))):p(d.success,a);e(g,v);t(d.complete)};b.log("Getting JSONP data");v.setAttribute("src",k);a.document.getElementsByTagName("head")[0].appendChild(v);c(v,"error",function(){e(g,v);t(d.complete);l(d.error,"Error while trying to access the URL")})};b.post=function(a){var a=a||{},c=a.url,e=a.parameters||{},f={};if(!c)throw Error("URL must be specified!");c="http://query.yahooapis.com/v1/public/yql?q="+
encodeURIComponent('select * from jsonpost where url="'+c+'" and postdata="'+h(e,!1)+'"')+"&format=json&env="+encodeURIComponent("store://datatables.org/alltableswithkeys");f.url=c;f.httpMethod="post";if("undefined"!==typeof a.success)f.success=a.success;if("undefined"!==typeof a.error)f.error=a.error;if("undefined"!==typeof a.complete)f.complete=a.complete;b.get(f)};return b}(this);
visiblemeasures.YouTubeAdapter=function(a,b,c,e){this.vmc=null;this._id=a;this._l=visiblemeasures.Logger;this.previousVideoId=null;this.currentVideo={};this.accountKey=b;this.player=c;this.host=e.host;this.referrer=e.referrer;this.options=e};
visiblemeasures.YouTubeAdapter.prototype={loadApi:function(a){this.loadScript(a,visiblemeasures.utility.createDelegate(this,this.initialize))},initialize:function(){var a=this,b={id:1};if(this.host)b.hostPage=this.host;if(this.referrer)b.hostReferrer=this.referrer;b={playerInfo:b,accountKey:this.accountKey,pixel:this.options.pixel?!0:!1,adTagPixels:this.options.adTagPixels,adContextParams:this.options.adcontext,stage:this.options.stage?!0:!1};this.vmc=new VMCUtility;this.vmc.configure(b);b=this.vmc.getRemoteNode();
this.vmc.instrumentGenericTimer({property:function(){var a=0;this.player&&(a=this.player.getCurrentTime());return a},target:this,units:"seconds"},b);this.player.addEventListener("onStateChange",function(b){b.data==YT.PlayerState.PLAYING&&a.onPlaying(b)})},onPlaying:function(){var a=this.extractVideoId(this.player.getVideoUrl());if(this.previousVideoId!=a)this.previousVideoId=a,this.currentVideo={id:a,url:this.player.getVideoUrl()},this._l.debug("calling clipViewed "),this.vmc.getRemoteNode().clipViewed({id:a}),
this.loadMetadata(this.currentVideo.id)},getDuration:function(){var a=this.player.getDuration();this._l.debug("player.getDuration()="+a);var b=this;0!=a?(this.currentVideo.duration=a,this.loadMetadata(this.currentVideo.id)):setTimeout(function(){b.getDuration()},1E3)},extractVideoId:function(a){var b="",c;-1!=a.indexOf("/v/",0)?(c=a.indexOf("/v/")+3,b=-1!=a.indexOf("&",c)?a.indexOf("&",c):a.length,b=a.substring(c,b)):-1!=a.indexOf("/watch?")?(b=a.substring(a.indexOf("?",0),a.length),-1!=b.indexOf("?v=")?
c=a.indexOf("/watch?v=")+9:-1!=b.indexOf("&v=")&&(c=a.indexOf("&v=")+3),b=-1!=a.indexOf("&",c)?a.indexOf("&",c):a.length,b=a.substring(c,b)):(this._l.error("# *** ERROR *** Unexpected  YT video url format: <"+a+"> YTPA"),b=a);return b},loadMetadata:function(a){var b=this;visiblemeasures.FlyJSONP.get({url:"//gdata.youtube.com/feeds/api/videos/"+a+"?v=2&alt=jsonc",success:function(a){b.handleMetadata(a.data,null)},error:function(a){b.handleMetadata(null,a)}})},handleMetadata:function(a){var b=null;
if(!a||!a.id||!a.duration)this._l.warn("metadata is null, or invalid."),this.currentVideo.duration=this.player.getDuration(),b={id:this.currentVideo.id,flvSourceUrl:this.currentVideo.url};else if(this.currentVideo.duration=a.duration,b={id:a.id,flvSourceUrl:this.currentVideo.url,title:this.addMetadata(a,"title",""),decription:this.addMetadata(a,"description",""),category:this.addMetadata(a,"category",""),publisher:this.addMetadata(a,"uploader","")},a.thumbnail&&a.thumbnail.hqDefault)b.thumbnailUrl=
a.thumbnail.hqDefault;else if(a.thumbnail&&a.thumbnail.sqDefault)b.thumbnailUrl=a.thumbnail.sqDefault;this._l.debug("calling setClipInfo");this.vmc.getRemoteNode().setClipInfo(b);this._l.debug("calling setClipDuration w/"+1E3*this.currentVideo.duration);this.vmc.getRemoteNode().setClipDuration(1E3*this.currentVideo.duration)},addMetadata:function(a,b,c){return a[b]&&""!=a[b]?a[b]:c},loadScript:function(a,b){var c=document.createElement("script");c.type="text/javascript";c.readyState?c.onreadystatechange=
function(){if("loaded"==c.readyState||"complete"==c.readyState)c.onreadystatechange=null,b()}:c.onload=function(){b()};c.src=a;document.getElementsByTagName("head")[0].appendChild(c)}};window.visiblemeasures=window.visiblemeasures||{};window.visiblemeasures.utility={createDelegate:function(a,b){return function(){b.apply(a)}}};
